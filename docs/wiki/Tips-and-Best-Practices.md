# Tips and Best Practices

## DisplayName で検索してレビューする

### なぜ DisplayName ベースのレビューが重要か

UiPath Studio でワークフローを操作する際、開発者が見ているのはアクティビティの **DisplayName** です。一方、GitHub の Raw diff には XML タグ名やプロパティが並ぶだけで、どのアクティビティの変更なのかが分かりにくい。

この拡張機能は DisplayName を軸にすることで、「UiPath Studio で見ている世界」と「GitHub で見ている世界」のギャップを埋めます。

### 検索を使ったレビュー手順

1. **差分サマリーで全体像を把握**: 追加・削除・変更の件数を確認
2. **気になる変更カードを確認**: `~ 変更` バッジのカードを中心に見る
3. **Ctrl+F で DisplayName を検索**: 特定のアクティビティを探す場合に有効
4. **行番号バッジで Raw XAML と照合**: 実際の XML レベルで詳細を確認したい場合

### 検索テクニック

- **部分一致**: 検索は大文字小文字を区別しない部分一致。`変数` と入力すれば `変数Aを設定` も `変数Bを更新` もヒットする
- **祖先カードの維持**: 一致カードの親（Sequence や If など）は淡色化されないため、階層構造が把握しやすい
- **Enter で順に巡回**: 一致が複数ある場合、Enter / Shift+Enter で前後に移動できる（循環）

---

## レビューしやすい PR の作り方（開発者向け）

### 1. 変更を小さく保つ

1 つの PR に大量のアクティビティ変更を詰め込まないようにする。差分サマリーで「追加: 50 / 変更: 30」と表示されると、レビュアーは圧倒される。

**目安**: 1 PR あたり、主要な変更は 10 アクティビティ以内が理想。

### 2. DisplayName を分かりやすくする

レビュアーは DisplayName を頼りにレビューする。デフォルトの `Assign` や `If` のままだと、何の処理か分からない。

**良い例**:
- `ユーザー名を取得`
- `ログイン状態をチェック`
- `エラー時にメール送信`

**避けたい例**:
- `Assign`（デフォルトのまま）
- `If1`
- `Sequence`

### 3. PR の説明に変更概要を書く

Visualizer の差分サマリーで「変更 5」と表示されても、**なぜ** 変更したかは分からない。PR の description に変更の意図を記載する。

### 4. 1 つの .xaml ファイルに変更を集中させない

可能であれば、ワークフローを複数ファイルに分割し、PR での変更ファイル数を抑える。`InvokeWorkflowFile` でサブワークフローを呼び出す構成にすると、レビュー単位が小さくなる。

---

## FAQ / トラブルシューティング

### Q: 「View as Workflow」ボタンが表示されない

**原因**: GitHub の SPA ナビゲーションによるタイミング問題の可能性。

**対処法**:
- ページをリロードする
- `.xaml` ファイルを含む PR の「Files changed」タブにいることを確認する

### Q: 差分が「読み込み中...」のまま進まない

**原因**: base/head の SHA 取得に失敗している可能性。

**対処法**:
- ブラウザのコンソールを開いて `UiPath Visualizer:` のログを確認
- プライベートリポジトリの場合、GitHub にログインしているか確認

### Q: レビューコメントの投稿が失敗する

**原因**: GitHub API への認証が通っていない可能性。

**対処法**:
- GitHub にログインしているか確認
- Chrome 拡張の権限設定を確認（`api.github.com` へのアクセスが必要）

### Q: カーソル同期でハイライトされない

**原因**: 行番号マッピングが構築できないケース（XAML の構造が特殊な場合など）。

**対処法**:
- コンソールログでマッピングの状態を確認
- Visualizer パネルを閉じて再度開く

### Q: 検索で見つからない

**原因**: 検索は各カードの直接のタイトル（`type: DisplayName`）のみが対象。プロパティ値やコメント本文は検索対象外。

**対処法**:
- DisplayName の一部で検索する
- ブラウザ標準の Ctrl+F は Visualizer パネル外で動作するため、Raw XAML 内の検索にはそちらを使用

[← Home に戻る](./Home.md)
